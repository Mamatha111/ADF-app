/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/*!
 * @license
 * Copyright 2019 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
import { AppsProcessService, TranslationService, CustomEmptyContentTemplateDirective } from '@alfresco/adf-core';
import { Component, EventEmitter, Input, Output, ContentChild } from '@angular/core';
import { Observable, of } from 'rxjs';
import { IconModel } from './icon.model';
import { share } from 'rxjs/operators';
var AppsListComponent = /** @class */ (function () {
    function AppsListComponent(appsProcessService, translationService) {
        var _this = this;
        this.appsProcessService = appsProcessService;
        this.translationService = translationService;
        /**
         * (**required**) Defines the layout of the apps. There are two possible
         * values, "GRID" and "LIST".
         */
        this.layoutType = AppsListComponent.LAYOUT_GRID;
        /**
         * Emitted when an app entry is clicked.
         */
        this.appClick = new EventEmitter();
        /**
         * Emitted when an error occurs.
         */
        this.error = new EventEmitter();
        this.appList = [];
        this.loading = false;
        this.hasEmptyCustomContentTemplate = false;
        this.apps$ = new Observable(function (observer) { return _this.appsObserver = observer; })
            .pipe(share());
    }
    /**
     * @return {?}
     */
    AppsListComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        var _this = this;
        if (!this.isValidType()) {
            this.setDefaultLayoutType();
        }
        this.apps$.subscribe(function (app) {
            _this.appList.push(app);
        });
        this.iconsMDL = new IconModel();
        this.load();
    };
    /**
     * @return {?}
     */
    AppsListComponent.prototype.ngAfterContentInit = /**
     * @return {?}
     */
    function () {
        if (this.emptyCustomContent) {
            this.hasEmptyCustomContentTemplate = true;
        }
    };
    /**
     * @private
     * @return {?}
     */
    AppsListComponent.prototype.load = /**
     * @private
     * @return {?}
     */
    function () {
        var _this = this;
        this.loading = true;
        this.appsProcessService.getDeployedApplications()
            .subscribe(function (res) {
            _this.filterApps(res).forEach(function (app) {
                if (_this.isDefaultApp(app)) {
                    app.theme = AppsListComponent.DEFAULT_TASKS_APP_THEME;
                    app.icon = AppsListComponent.DEFAULT_TASKS_APP_ICON;
                    _this.appsObserver.next(app);
                }
                else if (app.deploymentId) {
                    _this.appsObserver.next(app);
                }
                _this.loading = false;
            });
        }, function (err) {
            _this.error.emit(err);
            _this.loading = false;
        });
    };
    /**
     * @param {?} app
     * @return {?}
     */
    AppsListComponent.prototype.isDefaultApp = /**
     * @param {?} app
     * @return {?}
     */
    function (app) {
        return app.defaultAppId === AppsListComponent.DEFAULT_TASKS_APP;
    };
    /**
     * @param {?} app
     * @return {?}
     */
    AppsListComponent.prototype.getAppName = /**
     * @param {?} app
     * @return {?}
     */
    function (app) {
        return this.isDefaultApp(app)
            ? this.translationService.get(AppsListComponent.DEFAULT_TASKS_APP_NAME)
            : of(app.name);
    };
    /**
     * Pass the selected app as next
     * @param app
     */
    /**
     * Pass the selected app as next
     * @param {?} app
     * @return {?}
     */
    AppsListComponent.prototype.selectApp = /**
     * Pass the selected app as next
     * @param {?} app
     * @return {?}
     */
    function (app) {
        this.currentApp = app;
        this.appClick.emit(app);
    };
    /**
     * Return true if the appId is the current app
     * @param appId
     */
    /**
     * Return true if the appId is the current app
     * @param {?} appId
     * @return {?}
     */
    AppsListComponent.prototype.isSelected = /**
     * Return true if the appId is the current app
     * @param {?} appId
     * @return {?}
     */
    function (appId) {
        return (this.currentApp !== undefined && appId === this.currentApp.id);
    };
    /**
     * @private
     * @param {?} apps
     * @return {?}
     */
    AppsListComponent.prototype.filterApps = /**
     * @private
     * @param {?} apps
     * @return {?}
     */
    function (apps) {
        var _this = this;
        /** @type {?} */
        var filteredApps = [];
        if (this.filtersAppId) {
            apps.filter(function (app) {
                _this.filtersAppId.forEach(function (filter) {
                    if (app.defaultAppId === filter.defaultAppId ||
                        app.deploymentId === filter.deploymentId ||
                        app.name === filter.name ||
                        app.id === filter.id ||
                        app.modelId === filter.modelId ||
                        app.tenantId === filter.tenantId) {
                        filteredApps.push(app);
                    }
                });
            });
        }
        else {
            return apps;
        }
        return filteredApps;
    };
    /**
     * Check if the value of the layoutType property is an allowed value
     */
    /**
     * Check if the value of the layoutType property is an allowed value
     * @return {?}
     */
    AppsListComponent.prototype.isValidType = /**
     * Check if the value of the layoutType property is an allowed value
     * @return {?}
     */
    function () {
        if (this.layoutType && (this.layoutType === AppsListComponent.LAYOUT_LIST || this.layoutType === AppsListComponent.LAYOUT_GRID)) {
            return true;
        }
        return false;
    };
    /**
     * Assign the default value to LayoutType
     */
    /**
     * Assign the default value to LayoutType
     * @return {?}
     */
    AppsListComponent.prototype.setDefaultLayoutType = /**
     * Assign the default value to LayoutType
     * @return {?}
     */
    function () {
        this.layoutType = AppsListComponent.LAYOUT_GRID;
    };
    /**
     * Return true if the layout type is LIST
     */
    /**
     * Return true if the layout type is LIST
     * @return {?}
     */
    AppsListComponent.prototype.isList = /**
     * Return true if the layout type is LIST
     * @return {?}
     */
    function () {
        return this.layoutType === AppsListComponent.LAYOUT_LIST;
    };
    /**
     * Return true if the layout type is GRID
     */
    /**
     * Return true if the layout type is GRID
     * @return {?}
     */
    AppsListComponent.prototype.isGrid = /**
     * Return true if the layout type is GRID
     * @return {?}
     */
    function () {
        return this.layoutType === AppsListComponent.LAYOUT_GRID;
    };
    /**
     * @return {?}
     */
    AppsListComponent.prototype.isEmpty = /**
     * @return {?}
     */
    function () {
        return this.appList.length === 0;
    };
    /**
     * @return {?}
     */
    AppsListComponent.prototype.isLoading = /**
     * @return {?}
     */
    function () {
        return this.loading;
    };
    /**
     * @param {?} app
     * @return {?}
     */
    AppsListComponent.prototype.getTheme = /**
     * @param {?} app
     * @return {?}
     */
    function (app) {
        return app.theme ? app.theme : '';
    };
    /**
     * @param {?} app
     * @return {?}
     */
    AppsListComponent.prototype.getBackgroundIcon = /**
     * @param {?} app
     * @return {?}
     */
    function (app) {
        return this.iconsMDL.mapGlyphiconToMaterialDesignIcons(app.icon);
    };
    AppsListComponent.LAYOUT_LIST = 'LIST';
    AppsListComponent.LAYOUT_GRID = 'GRID';
    AppsListComponent.DEFAULT_TASKS_APP = 'tasks';
    AppsListComponent.DEFAULT_TASKS_APP_NAME = 'ADF_TASK_LIST.APPS.TASK_APP_NAME';
    AppsListComponent.DEFAULT_TASKS_APP_THEME = 'theme-2';
    AppsListComponent.DEFAULT_TASKS_APP_ICON = 'glyphicon-asterisk';
    AppsListComponent.DEFAULT_TASKS_APP_MATERIAL_ICON = 'favorite_border';
    AppsListComponent.decorators = [
        { type: Component, args: [{
                    selector: 'adf-apps',
                    template: "<div class=\"menu-container\" *ngIf=\"!isEmpty()\">\n    <mat-list *ngIf=\"isList()\" class=\"adf-app-list\">\n        <mat-list-item class=\"adf-app-list-item\" (click)=\"selectApp(app)\" (keyup.enter)=\"selectApp(app)\" *ngFor=\"let app of appList\" tabindex=\"0\" role=\"button\" title=\"{{app.name}}\">\n            <mat-icon matListIcon>touch_app</mat-icon>\n            <span matLine>{{getAppName(app) | async}}</span>\n        </mat-list-item>\n    </mat-list>\n    <div fxLayout=\"row wrap\" *ngIf=\"isGrid()\" class=\"adf-app-listgrid\">\n        <div *ngFor=\"let app of appList\"\n            class=\"adf-app-listgrid-item\"\n            fxFlex=\"33.33333%\" fxFlex.lt-md=\"50%\" fxFlex.lt-sm=\"100%\">\n                <mat-card tabindex=\"0\"\n                    fxLayout=\"column\"\n                    role=\"button\"\n                    class=\"adf-app-listgrid-item-card\"\n                    title=\"{{getAppName(app) | async}}\"\n                    [ngClass]=\"[getTheme(app)]\"\n                    (click)=\"selectApp(app)\"\n                    (keyup.enter)=\"selectApp(app)\">\n                        <div class=\"adf-app-listgrid-item-card-logo\">\n                            <mat-icon class=\"adf-app-listgrid-item-card-logo-icon\">{{getBackgroundIcon(app)}}</mat-icon>\n                        </div>\n                        <div mat-card-title class=\"adf-app-listgrid-item-card-title\">\n                            <h1>{{getAppName(app) | async}}</h1>\n                        </div>\n                        <mat-card-subtitle class=\"adf-app-listgrid-item-card-subtitle\" fxFlex=\"1 0 auto\">\n                            <div class=\"adf-line-clamp\">{{app.description}}</div>\n                        </mat-card-subtitle>\n\n                        <mat-card-actions class=\"adf-app-listgrid-item-card-actions\">\n                            <mat-icon class=\"adf-app-listgrid-item-card-actions-icon\" *ngIf=\"isSelected(app.id)\">done</mat-icon>\n                        </mat-card-actions>\n                </mat-card>\n        </div>\n    </div>\n</div>\n\n<ng-container *ngIf=\"isLoading(); else empty\">\n    <div class=\"adf-app-list-spinner\">\n        <mat-spinner></mat-spinner>\n    </div>\n</ng-container>\n\n<ng-template #empty>\n    <div class=\"adf-app-list-empty\" *ngIf=\"isEmpty()\">\n        <ng-content select=\"adf-custom-empty-content\" *ngIf=\"hasEmptyCustomContentTemplate; else defaultEmptyTemplate\" class=\"adf-custom-empty-template\"></ng-content>\n\n        <ng-template #defaultEmptyTemplate>\n            <adf-empty-content\n                icon=\"apps\"\n                [title]=\"'ADF_TASK_LIST.APPS.TITLE' | translate\"\n                [subtitle]=\"'ADF_TASK_LIST.APPS.SUBTITLE' | translate\">\n            </adf-empty-content>\n        </ng-template>\n    </div>\n</ng-template>\n",
                    styles: [""]
                }] }
    ];
    /** @nocollapse */
    AppsListComponent.ctorParameters = function () { return [
        { type: AppsProcessService },
        { type: TranslationService }
    ]; };
    AppsListComponent.propDecorators = {
        emptyCustomContent: [{ type: ContentChild, args: [CustomEmptyContentTemplateDirective,] }],
        layoutType: [{ type: Input }],
        filtersAppId: [{ type: Input }],
        appClick: [{ type: Output }],
        error: [{ type: Output }]
    };
    return AppsListComponent;
}());
export { AppsListComponent };
if (false) {
    /** @type {?} */
    AppsListComponent.LAYOUT_LIST;
    /** @type {?} */
    AppsListComponent.LAYOUT_GRID;
    /** @type {?} */
    AppsListComponent.DEFAULT_TASKS_APP;
    /** @type {?} */
    AppsListComponent.DEFAULT_TASKS_APP_NAME;
    /** @type {?} */
    AppsListComponent.DEFAULT_TASKS_APP_THEME;
    /** @type {?} */
    AppsListComponent.DEFAULT_TASKS_APP_ICON;
    /** @type {?} */
    AppsListComponent.DEFAULT_TASKS_APP_MATERIAL_ICON;
    /** @type {?} */
    AppsListComponent.prototype.emptyCustomContent;
    /**
     * (**required**) Defines the layout of the apps. There are two possible
     * values, "GRID" and "LIST".
     * @type {?}
     */
    AppsListComponent.prototype.layoutType;
    /**
     * Provides a way to filter the apps to show.
     * @type {?}
     */
    AppsListComponent.prototype.filtersAppId;
    /**
     * Emitted when an app entry is clicked.
     * @type {?}
     */
    AppsListComponent.prototype.appClick;
    /**
     * Emitted when an error occurs.
     * @type {?}
     */
    AppsListComponent.prototype.error;
    /**
     * @type {?}
     * @private
     */
    AppsListComponent.prototype.appsObserver;
    /** @type {?} */
    AppsListComponent.prototype.apps$;
    /** @type {?} */
    AppsListComponent.prototype.currentApp;
    /** @type {?} */
    AppsListComponent.prototype.appList;
    /**
     * @type {?}
     * @private
     */
    AppsListComponent.prototype.iconsMDL;
    /** @type {?} */
    AppsListComponent.prototype.loading;
    /** @type {?} */
    AppsListComponent.prototype.hasEmptyCustomContentTemplate;
    /**
     * @type {?}
     * @private
     */
    AppsListComponent.prototype.appsProcessService;
    /**
     * @type {?}
     * @private
     */
    AppsListComponent.prototype.translationService;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXBwcy1saXN0LmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0BhbGZyZXNjby9hZGYtcHJvY2Vzcy1zZXJ2aWNlcy8iLCJzb3VyY2VzIjpbImFwcC1saXN0L2FwcHMtbGlzdC5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFpQkEsT0FBTyxFQUFFLGtCQUFrQixFQUFFLGtCQUFrQixFQUFFLG1DQUFtQyxFQUFFLE1BQU0sb0JBQW9CLENBQUM7QUFDakgsT0FBTyxFQUFvQixTQUFTLEVBQUUsWUFBWSxFQUFFLEtBQUssRUFBVSxNQUFNLEVBQUUsWUFBWSxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBQy9HLE9BQU8sRUFBRSxVQUFVLEVBQVksRUFBRSxFQUFFLE1BQU0sTUFBTSxDQUFDO0FBRWhELE9BQU8sRUFBRSxTQUFTLEVBQUUsTUFBTSxjQUFjLENBQUM7QUFDekMsT0FBTyxFQUFFLEtBQUssRUFBRSxNQUFNLGdCQUFnQixDQUFDO0FBRXZDO0lBaURJLDJCQUNZLGtCQUFzQyxFQUN0QyxrQkFBc0M7UUFGbEQsaUJBS0M7UUFKVyx1QkFBa0IsR0FBbEIsa0JBQWtCLENBQW9CO1FBQ3RDLHVCQUFrQixHQUFsQixrQkFBa0IsQ0FBb0I7Ozs7O1FBN0JsRCxlQUFVLEdBQVcsaUJBQWlCLENBQUMsV0FBVyxDQUFDOzs7O1FBUW5ELGFBQVEsR0FBbUQsSUFBSSxZQUFZLEVBQW9DLENBQUM7Ozs7UUFJaEgsVUFBSyxHQUFzQixJQUFJLFlBQVksRUFBTyxDQUFDO1FBT25ELFlBQU8sR0FBd0MsRUFBRSxDQUFDO1FBSWxELFlBQU8sR0FBWSxLQUFLLENBQUM7UUFFekIsa0NBQTZCLEdBQVksS0FBSyxDQUFDO1FBS3ZDLElBQUksQ0FBQyxLQUFLLEdBQUcsSUFBSSxVQUFVLENBQW1DLFVBQUMsUUFBUSxJQUFLLE9BQUEsS0FBSSxDQUFDLFlBQVksR0FBRyxRQUFRLEVBQTVCLENBQTRCLENBQUM7YUFDcEcs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OzJCQUlMLE1BQU07d0JBSU4sTUFBTTs7SUErSlgsd0JBQUM7Q0FBQSxBQWhNRCxJQWdNQztTQTNMWSxpQkFBaUI7OztJQUUxQiw4QkFBMkM7O0lBQzNDLDhCQUEyQzs7SUFDM0Msb0NBQWtEOztJQUNsRCx5Q0FBa0Y7O0lBQ2xGLDBDQUEwRDs7SUFDMUQseUNBQW9FOztJQUNwRSxrREFBMEU7O0lBRTFFLCtDQUN3RDs7Ozs7O0lBS3hELHVDQUNtRDs7Ozs7SUFHbkQseUNBQ29COzs7OztJQUdwQixxQ0FDZ0g7Ozs7O0lBR2hILGtDQUNtRDs7Ozs7SUFFbkQseUNBQWlFOztJQUNqRSxrQ0FBb0Q7O0lBRXBELHVDQUE2Qzs7SUFFN0Msb0NBQWtEOzs7OztJQUVsRCxxQ0FBNEI7O0lBRTVCLG9DQUF5Qjs7SUFFekIsMERBQStDOzs7OztJQUczQywrQ0FBOEM7Ozs7O0lBQzlDLCtDQUE4QyIsInNvdXJjZXNDb250ZW50IjpbIi8qIVxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE5IEFsZnJlc2NvIFNvZnR3YXJlLCBMdGQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7IEFwcHNQcm9jZXNzU2VydmljZSwgVHJhbnNsYXRpb25TZXJ2aWNlLCBDdXN0b21FbXB0eUNvbnRlbnRUZW1wbGF0ZURpcmVjdGl2ZSB9IGZyb20gJ0BhbGZyZXNjby9hZGYtY29yZSc7XG5pbXBvcnQgeyBBZnRlckNvbnRlbnRJbml0LCBDb21wb25lbnQsIEV2ZW50RW1pdHRlciwgSW5wdXQsIE9uSW5pdCwgT3V0cHV0LCBDb250ZW50Q2hpbGQgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IE9ic2VydmFibGUsIE9ic2VydmVyLCBvZiB9IGZyb20gJ3J4anMnO1xuaW1wb3J0IHsgQXBwRGVmaW5pdGlvblJlcHJlc2VudGF0aW9uTW9kZWwgfSBmcm9tICcuLi90YXNrLWxpc3QnO1xuaW1wb3J0IHsgSWNvbk1vZGVsIH0gZnJvbSAnLi9pY29uLm1vZGVsJztcbmltcG9ydCB7IHNoYXJlIH0gZnJvbSAncnhqcy9vcGVyYXRvcnMnO1xuXG5AQ29tcG9uZW50KHtcbiAgICBzZWxlY3RvcjogJ2FkZi1hcHBzJyxcbiAgICB0ZW1wbGF0ZVVybDogJ2FwcHMtbGlzdC5jb21wb25lbnQuaHRtbCcsXG4gICAgc3R5bGVVcmxzOiBbJy4vYXBwcy1saXN0LmNvbXBvbmVudC5zY3NzJ11cbn0pXG5leHBvcnQgY2xhc3MgQXBwc0xpc3RDb21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQsIEFmdGVyQ29udGVudEluaXQge1xuXG4gICAgcHVibGljIHN0YXRpYyBMQVlPVVRfTElTVDogc3RyaW5nID0gJ0xJU1QnO1xuICAgIHB1YmxpYyBzdGF0aWMgTEFZT1VUX0dSSUQ6IHN0cmluZyA9ICdHUklEJztcbiAgICBwdWJsaWMgc3RhdGljIERFRkFVTFRfVEFTS1NfQVBQOiBzdHJpbmcgPSAndGFza3MnO1xuICAgIHB1YmxpYyBzdGF0aWMgREVGQVVMVF9UQVNLU19BUFBfTkFNRTogc3RyaW5nID0gJ0FERl9UQVNLX0xJU1QuQVBQUy5UQVNLX0FQUF9OQU1FJztcbiAgICBwdWJsaWMgc3RhdGljIERFRkFVTFRfVEFTS1NfQVBQX1RIRU1FOiBzdHJpbmcgPSAndGhlbWUtMic7XG4gICAgcHVibGljIHN0YXRpYyBERUZBVUxUX1RBU0tTX0FQUF9JQ09OOiBzdHJpbmcgPSAnZ2x5cGhpY29uLWFzdGVyaXNrJztcbiAgICBwdWJsaWMgc3RhdGljIERFRkFVTFRfVEFTS1NfQVBQX01BVEVSSUFMX0lDT046IHN0cmluZyA9ICdmYXZvcml0ZV9ib3JkZXInO1xuXG4gICAgQENvbnRlbnRDaGlsZChDdXN0b21FbXB0eUNvbnRlbnRUZW1wbGF0ZURpcmVjdGl2ZSlcbiAgICBlbXB0eUN1c3RvbUNvbnRlbnQ6IEN1c3RvbUVtcHR5Q29udGVudFRlbXBsYXRlRGlyZWN0aXZlO1xuXG4gICAgLyoqICgqKnJlcXVpcmVkKiopIERlZmluZXMgdGhlIGxheW91dCBvZiB0aGUgYXBwcy4gVGhlcmUgYXJlIHR3byBwb3NzaWJsZVxuICAgICAqIHZhbHVlcywgXCJHUklEXCIgYW5kIFwiTElTVFwiLlxuICAgICAqL1xuICAgIEBJbnB1dCgpXG4gICAgbGF5b3V0VHlwZTogc3RyaW5nID0gQXBwc0xpc3RDb21wb25lbnQuTEFZT1VUX0dSSUQ7XG5cbiAgICAvKiogUHJvdmlkZXMgYSB3YXkgdG8gZmlsdGVyIHRoZSBhcHBzIHRvIHNob3cuICovXG4gICAgQElucHV0KClcbiAgICBmaWx0ZXJzQXBwSWQ6IGFueVtdO1xuXG4gICAgLyoqIEVtaXR0ZWQgd2hlbiBhbiBhcHAgZW50cnkgaXMgY2xpY2tlZC4gKi9cbiAgICBAT3V0cHV0KClcbiAgICBhcHBDbGljazogRXZlbnRFbWl0dGVyPEFwcERlZmluaXRpb25SZXByZXNlbnRhdGlvbk1vZGVsPiA9IG5ldyBFdmVudEVtaXR0ZXI8QXBwRGVmaW5pdGlvblJlcHJlc2VudGF0aW9uTW9kZWw+KCk7XG5cbiAgICAvKiogRW1pdHRlZCB3aGVuIGFuIGVycm9yIG9jY3Vycy4gKi9cbiAgICBAT3V0cHV0KClcbiAgICBlcnJvcjogRXZlbnRFbWl0dGVyPGFueT4gPSBuZXcgRXZlbnRFbWl0dGVyPGFueT4oKTtcblxuICAgIHByaXZhdGUgYXBwc09ic2VydmVyOiBPYnNlcnZlcjxBcHBEZWZpbml0aW9uUmVwcmVzZW50YXRpb25Nb2RlbD47XG4gICAgYXBwcyQ6IE9ic2VydmFibGU8QXBwRGVmaW5pdGlvblJlcHJlc2VudGF0aW9uTW9kZWw+O1xuXG4gICAgY3VycmVudEFwcDogQXBwRGVmaW5pdGlvblJlcHJlc2VudGF0aW9uTW9kZWw7XG5cbiAgICBhcHBMaXN0OiBBcHBEZWZpbml0aW9uUmVwcmVzZW50YXRpb25Nb2RlbCBbXSA9IFtdO1xuXG4gICAgcHJpdmF0ZSBpY29uc01ETDogSWNvbk1vZGVsO1xuXG4gICAgbG9hZGluZzogYm9vbGVhbiA9IGZhbHNlO1xuXG4gICAgaGFzRW1wdHlDdXN0b21Db250ZW50VGVtcGxhdGU6IGJvb2xlYW4gPSBmYWxzZTtcblxuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwcml2YXRlIGFwcHNQcm9jZXNzU2VydmljZTogQXBwc1Byb2Nlc3NTZXJ2aWNlLFxuICAgICAgICBwcml2YXRlIHRyYW5zbGF0aW9uU2VydmljZTogVHJhbnNsYXRpb25TZXJ2aWNlKSB7XG4gICAgICAgICAgICB0aGlzLmFwcHMkID0gbmV3IE9ic2VydmFibGU8QXBwRGVmaW5pdGlvblJlcHJlc2VudGF0aW9uTW9kZWw+KChvYnNlcnZlcikgPT4gdGhpcy5hcHBzT2JzZXJ2ZXIgPSBvYnNlcnZlcilcbiAgICAgICAgICAgICAgICAucGlwZShzaGFyZSgpKTtcbiAgICB9XG5cbiAgICBuZ09uSW5pdCgpIHtcbiAgICAgICAgaWYgKCF0aGlzLmlzVmFsaWRUeXBlKCkpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0RGVmYXVsdExheW91dFR5cGUoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuYXBwcyQuc3Vic2NyaWJlKChhcHA6IGFueSkgPT4ge1xuICAgICAgICAgICAgdGhpcy5hcHBMaXN0LnB1c2goYXBwKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuaWNvbnNNREwgPSBuZXcgSWNvbk1vZGVsKCk7XG4gICAgICAgIHRoaXMubG9hZCgpO1xuICAgIH1cblxuICAgIG5nQWZ0ZXJDb250ZW50SW5pdCgpIHtcbiAgICAgICAgaWYgKHRoaXMuZW1wdHlDdXN0b21Db250ZW50KSB7XG4gICAgICAgICAgICB0aGlzLmhhc0VtcHR5Q3VzdG9tQ29udGVudFRlbXBsYXRlID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgbG9hZCgpIHtcbiAgICAgICAgdGhpcy5sb2FkaW5nID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5hcHBzUHJvY2Vzc1NlcnZpY2UuZ2V0RGVwbG95ZWRBcHBsaWNhdGlvbnMoKVxuICAgICAgICAuc3Vic2NyaWJlKFxuICAgICAgICAgICAgKHJlczogQXBwRGVmaW5pdGlvblJlcHJlc2VudGF0aW9uTW9kZWxbXSkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuZmlsdGVyQXBwcyhyZXMpLmZvckVhY2goKGFwcDogQXBwRGVmaW5pdGlvblJlcHJlc2VudGF0aW9uTW9kZWwpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuaXNEZWZhdWx0QXBwKGFwcCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFwcC50aGVtZSA9IEFwcHNMaXN0Q29tcG9uZW50LkRFRkFVTFRfVEFTS1NfQVBQX1RIRU1FO1xuICAgICAgICAgICAgICAgICAgICAgICAgYXBwLmljb24gPSBBcHBzTGlzdENvbXBvbmVudC5ERUZBVUxUX1RBU0tTX0FQUF9JQ09OO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hcHBzT2JzZXJ2ZXIubmV4dChhcHApO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGFwcC5kZXBsb3ltZW50SWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYXBwc09ic2VydmVyLm5leHQoYXBwKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAoZXJyKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5lcnJvci5lbWl0KGVycik7XG4gICAgICAgICAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgaXNEZWZhdWx0QXBwKGFwcCkge1xuICAgICAgICByZXR1cm4gYXBwLmRlZmF1bHRBcHBJZCA9PT0gQXBwc0xpc3RDb21wb25lbnQuREVGQVVMVF9UQVNLU19BUFA7XG4gICAgfVxuXG4gICAgZ2V0QXBwTmFtZShhcHApIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaXNEZWZhdWx0QXBwKGFwcClcbiAgICAgICAgICAgID8gdGhpcy50cmFuc2xhdGlvblNlcnZpY2UuZ2V0KEFwcHNMaXN0Q29tcG9uZW50LkRFRkFVTFRfVEFTS1NfQVBQX05BTUUpXG4gICAgICAgICAgICA6IG9mKGFwcC5uYW1lKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBQYXNzIHRoZSBzZWxlY3RlZCBhcHAgYXMgbmV4dFxuICAgICAqIEBwYXJhbSBhcHBcbiAgICAgKi9cbiAgICBwdWJsaWMgc2VsZWN0QXBwKGFwcDogQXBwRGVmaW5pdGlvblJlcHJlc2VudGF0aW9uTW9kZWwpIHtcbiAgICAgICAgdGhpcy5jdXJyZW50QXBwID0gYXBwO1xuICAgICAgICB0aGlzLmFwcENsaWNrLmVtaXQoYXBwKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm4gdHJ1ZSBpZiB0aGUgYXBwSWQgaXMgdGhlIGN1cnJlbnQgYXBwXG4gICAgICogQHBhcmFtIGFwcElkXG4gICAgICovXG4gICAgaXNTZWxlY3RlZChhcHBJZDogbnVtYmVyKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiAodGhpcy5jdXJyZW50QXBwICE9PSB1bmRlZmluZWQgJiYgYXBwSWQgPT09IHRoaXMuY3VycmVudEFwcC5pZCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBmaWx0ZXJBcHBzKGFwcHM6IEFwcERlZmluaXRpb25SZXByZXNlbnRhdGlvbk1vZGVsIFtdKTogQXBwRGVmaW5pdGlvblJlcHJlc2VudGF0aW9uTW9kZWxbXSB7XG4gICAgICAgIGxldCBmaWx0ZXJlZEFwcHM6IEFwcERlZmluaXRpb25SZXByZXNlbnRhdGlvbk1vZGVsW10gPSBbXTtcbiAgICAgICAgaWYgKHRoaXMuZmlsdGVyc0FwcElkKSB7XG4gICAgICAgICAgICBhcHBzLmZpbHRlcigoYXBwOiBBcHBEZWZpbml0aW9uUmVwcmVzZW50YXRpb25Nb2RlbCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuZmlsdGVyc0FwcElkLmZvckVhY2goKGZpbHRlcikgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAoYXBwLmRlZmF1bHRBcHBJZCA9PT0gZmlsdGVyLmRlZmF1bHRBcHBJZCB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgYXBwLmRlcGxveW1lbnRJZCA9PT0gZmlsdGVyLmRlcGxveW1lbnRJZCB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgYXBwLm5hbWUgPT09IGZpbHRlci5uYW1lIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICBhcHAuaWQgPT09IGZpbHRlci5pZCB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgYXBwLm1vZGVsSWQgPT09IGZpbHRlci5tb2RlbElkIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICBhcHAudGVuYW50SWQgPT09IGZpbHRlci50ZW5hbnRJZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZmlsdGVyZWRBcHBzLnB1c2goYXBwKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gYXBwcztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmlsdGVyZWRBcHBzO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENoZWNrIGlmIHRoZSB2YWx1ZSBvZiB0aGUgbGF5b3V0VHlwZSBwcm9wZXJ0eSBpcyBhbiBhbGxvd2VkIHZhbHVlXG4gICAgICovXG4gICAgaXNWYWxpZFR5cGUoKTogYm9vbGVhbiB7XG4gICAgICAgIGlmICh0aGlzLmxheW91dFR5cGUgJiYgKHRoaXMubGF5b3V0VHlwZSA9PT0gQXBwc0xpc3RDb21wb25lbnQuTEFZT1VUX0xJU1QgfHwgdGhpcy5sYXlvdXRUeXBlID09PSBBcHBzTGlzdENvbXBvbmVudC5MQVlPVVRfR1JJRCkpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBc3NpZ24gdGhlIGRlZmF1bHQgdmFsdWUgdG8gTGF5b3V0VHlwZVxuICAgICAqL1xuICAgIHNldERlZmF1bHRMYXlvdXRUeXBlKCk6IHZvaWQge1xuICAgICAgICB0aGlzLmxheW91dFR5cGUgPSBBcHBzTGlzdENvbXBvbmVudC5MQVlPVVRfR1JJRDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm4gdHJ1ZSBpZiB0aGUgbGF5b3V0IHR5cGUgaXMgTElTVFxuICAgICAqL1xuICAgIGlzTGlzdCgpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubGF5b3V0VHlwZSA9PT0gQXBwc0xpc3RDb21wb25lbnQuTEFZT1VUX0xJU1Q7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0dXJuIHRydWUgaWYgdGhlIGxheW91dCB0eXBlIGlzIEdSSURcbiAgICAgKi9cbiAgICBpc0dyaWQoKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB0aGlzLmxheW91dFR5cGUgPT09IEFwcHNMaXN0Q29tcG9uZW50LkxBWU9VVF9HUklEO1xuICAgIH1cblxuICAgIGlzRW1wdHkoKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB0aGlzLmFwcExpc3QubGVuZ3RoID09PSAwO1xuICAgIH1cblxuICAgIGlzTG9hZGluZygpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubG9hZGluZztcbiAgICB9XG5cbiAgICBnZXRUaGVtZShhcHA6IEFwcERlZmluaXRpb25SZXByZXNlbnRhdGlvbk1vZGVsKTogc3RyaW5nIHtcbiAgICAgICAgcmV0dXJuIGFwcC50aGVtZSA/IGFwcC50aGVtZSA6ICcnO1xuICAgIH1cblxuICAgIGdldEJhY2tncm91bmRJY29uKGFwcDogQXBwRGVmaW5pdGlvblJlcHJlc2VudGF0aW9uTW9kZWwpOiBzdHJpbmcge1xuICAgICAgICByZXR1cm4gdGhpcy5pY29uc01ETC5tYXBHbHlwaGljb25Ub01hdGVyaWFsRGVzaWduSWNvbnMoYXBwLmljb24pO1xuICAgIH1cblxufVxuIl19