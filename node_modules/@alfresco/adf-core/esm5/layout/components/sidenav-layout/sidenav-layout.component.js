/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/*!
 * @license
 * Copyright 2019 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
import { Component, ContentChild, Input, Output, ViewChild, EventEmitter } from '@angular/core';
import { MediaMatcher } from '@angular/cdk/layout';
import { SidenavLayoutContentDirective } from '../../directives/sidenav-layout-content.directive';
import { SidenavLayoutHeaderDirective } from '../../directives/sidenav-layout-header.directive';
import { SidenavLayoutNavigationDirective } from '../../directives/sidenav-layout-navigation.directive';
import { BehaviorSubject } from 'rxjs';
var SidenavLayoutComponent = /** @class */ (function () {
    function SidenavLayoutComponent(mediaMatcher) {
        var _this = this;
        this.mediaMatcher = mediaMatcher;
        /**
         * The side that the drawer is attached to. Possible values are 'start' and 'end'.
         */
        this.position = 'start';
        /**
         * Toggles showing/hiding the navigation region.
         */
        this.hideSidenav = false;
        /**
         * Should the navigation region be expanded initially?
         */
        this.expandedSidenav = true;
        /**
         * Emitted when the menu toggle and the collapsed/expanded state of the sideNav changes.
         */
        this.expanded = new EventEmitter();
        this.templateContext = {
            toggleMenu: function () { },
            isMenuMinimized: function () { return _this.isMenuMinimized; }
        };
        this.onMediaQueryChange = this.onMediaQueryChange.bind(this);
    }
    /**
     * @return {?}
     */
    SidenavLayoutComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        /** @type {?} */
        var initialMenuState = !this.expandedSidenav;
        this.menuOpenStateSubject = new BehaviorSubject(initialMenuState);
        this.menuOpenState$ = this.menuOpenStateSubject.asObservable();
        /** @type {?} */
        var stepOver = this.stepOver || SidenavLayoutComponent.STEP_OVER;
        this.isMenuMinimized = initialMenuState;
        this.mediaQueryList = this.mediaMatcher.matchMedia("(max-width: " + stepOver + "px)");
        this.mediaQueryList.addListener(this.onMediaQueryChange);
    };
    /**
     * @return {?}
     */
    SidenavLayoutComponent.prototype.ngAfterViewInit = /**
     * @return {?}
     */
    function () {
        this.templateContext.toggleMenu = this.toggleMenu.bind(this);
    };
    /**
     * @return {?}
     */
    SidenavLayoutComponent.prototype.ngOnDestroy = /**
     * @return {?}
     */
    function () {
        this.mediaQueryList.removeListener(this.onMediaQueryChange);
    };
    /**
     * @return {?}
     */
    SidenavLayoutComponent.prototype.toggleMenu = /**
     * @return {?}
     */
    function () {
        if (!this.mediaQueryList.matches) {
            this.isMenuMinimized = !this.isMenuMinimized;
        }
        else {
            this.isMenuMinimized = false;
        }
        this.container.toggleMenu();
        this.expanded.emit(!this.isMenuMinimized);
    };
    Object.defineProperty(SidenavLayoutComponent.prototype, "isMenuMinimized", {
        get: /**
         * @return {?}
         */
        function () {
            return this._isMenuMinimized;
        },
        set: /**
         * @param {?} menuState
         * @return {?}
         */
        function (menuState) {
            this._isMenuMinimized = menuState;
            this.menuOpenStateSubject.next(!menuState);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(SidenavLayoutComponent.prototype, "isHeaderInside", {
        get: /**
         * @return {?}
         */
        function () {
            return this.mediaQueryList.matches;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(SidenavLayoutComponent.prototype, "headerTemplate", {
        get: /**
         * @return {?}
         */
        function () {
            return this.headerDirective && this.headerDirective.template || this.emptyTemplate;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(SidenavLayoutComponent.prototype, "navigationTemplate", {
        get: /**
         * @return {?}
         */
        function () {
            return this.navigationDirective && this.navigationDirective.template || this.emptyTemplate;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(SidenavLayoutComponent.prototype, "contentTemplate", {
        get: /**
         * @return {?}
         */
        function () {
            return this.contentDirective && this.contentDirective.template || this.emptyTemplate;
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @return {?}
     */
    SidenavLayoutComponent.prototype.onMediaQueryChange = /**
     * @return {?}
     */
    function () {
        this.isMenuMinimized = false;
        this.expanded.emit(!this.isMenuMinimized);
    };
    SidenavLayoutComponent.STEP_OVER = 600;
    SidenavLayoutComponent.decorators = [
        { type: Component, args: [{
                    selector: 'adf-sidenav-layout',
                    template: "<div class=\"adf-sidenav-layout\">\n    <ng-container *ngIf=\"!isHeaderInside\">\n        <ng-container class=\"adf-sidenav-layout-outer-header\"\n                      *ngTemplateOutlet=\"headerTemplate; context:templateContext\"></ng-container>\n    </ng-container>\n\n    <adf-layout-container #container\n                          [position]=\"position\"\n                          [sidenavMin]=\"sidenavMin\"\n                          [sidenavMax]=\"sidenavMax\"\n                          [mediaQueryList]=\"mediaQueryList\"\n                          [hideSidenav]=\"hideSidenav\"\n                          [expandedSidenav]=\"expandedSidenav\"\n                          data-automation-id=\"adf-layout-container\"\n                          class=\"adf-layout__content\">\n\n        <ng-container app-layout-navigation\n                      *ngTemplateOutlet=\"navigationTemplate; context:templateContext\"></ng-container>\n\n        <ng-container app-layout-content>\n            <ng-container *ngIf=\"isHeaderInside\">\n                <ng-container *ngTemplateOutlet=\"headerTemplate; context:templateContext\"></ng-container>\n            </ng-container>\n            <ng-container *ngTemplateOutlet=\"contentTemplate; context:templateContext\"></ng-container>\n        </ng-container>\n    </adf-layout-container>\n</div>\n\n<ng-template #emptyTemplate></ng-template>\n",
                    styles: [":host{display:flex;flex:1}:host .adf-sidenav-layout{width:100%;display:flex;flex-direction:column}:host .adf-sidenav-layout .adf-layout__content{flex:1 1 auto}:host router-outlet{flex:0 0}"]
                }] }
    ];
    /** @nocollapse */
    SidenavLayoutComponent.ctorParameters = function () { return [
        { type: MediaMatcher }
    ]; };
    SidenavLayoutComponent.propDecorators = {
        position: [{ type: Input }],
        sidenavMin: [{ type: Input }],
        sidenavMax: [{ type: Input }],
        stepOver: [{ type: Input }],
        hideSidenav: [{ type: Input }],
        expandedSidenav: [{ type: Input }],
        expanded: [{ type: Output }],
        headerDirective: [{ type: ContentChild, args: [SidenavLayoutHeaderDirective,] }],
        navigationDirective: [{ type: ContentChild, args: [SidenavLayoutNavigationDirective,] }],
        contentDirective: [{ type: ContentChild, args: [SidenavLayoutContentDirective,] }],
        container: [{ type: ViewChild, args: ['container',] }],
        emptyTemplate: [{ type: ViewChild, args: ['emptyTemplate',] }]
    };
    return SidenavLayoutComponent;
}());
export { SidenavLayoutComponent };
if (false) {
    /** @type {?} */
    SidenavLayoutComponent.STEP_OVER;
    /**
     * The side that the drawer is attached to. Possible values are 'start' and 'end'.
     * @type {?}
     */
    SidenavLayoutComponent.prototype.position;
    /**
     * Minimum size of the navigation region.
     * @type {?}
     */
    SidenavLayoutComponent.prototype.sidenavMin;
    /**
     * Maximum size of the navigation region.
     * @type {?}
     */
    SidenavLayoutComponent.prototype.sidenavMax;
    /**
     * Screen size at which display switches from small screen to large screen configuration.
     * @type {?}
     */
    SidenavLayoutComponent.prototype.stepOver;
    /**
     * Toggles showing/hiding the navigation region.
     * @type {?}
     */
    SidenavLayoutComponent.prototype.hideSidenav;
    /**
     * Should the navigation region be expanded initially?
     * @type {?}
     */
    SidenavLayoutComponent.prototype.expandedSidenav;
    /**
     * Emitted when the menu toggle and the collapsed/expanded state of the sideNav changes.
     * @type {?}
     */
    SidenavLayoutComponent.prototype.expanded;
    /** @type {?} */
    SidenavLayoutComponent.prototype.headerDirective;
    /** @type {?} */
    SidenavLayoutComponent.prototype.navigationDirective;
    /** @type {?} */
    SidenavLayoutComponent.prototype.contentDirective;
    /**
     * @type {?}
     * @private
     */
    SidenavLayoutComponent.prototype.menuOpenStateSubject;
    /** @type {?} */
    SidenavLayoutComponent.prototype.menuOpenState$;
    /** @type {?} */
    SidenavLayoutComponent.prototype.container;
    /** @type {?} */
    SidenavLayoutComponent.prototype.emptyTemplate;
    /** @type {?} */
    SidenavLayoutComponent.prototype.mediaQueryList;
    /** @type {?} */
    SidenavLayoutComponent.prototype._isMenuMinimized;
    /** @type {?} */
    SidenavLayoutComponent.prototype.templateContext;
    /**
     * @type {?}
     * @private
     */
    SidenavLayoutComponent.prototype.mediaMatcher;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2lkZW5hdi1sYXlvdXQuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6Im5nOi8vQGFsZnJlc2NvL2FkZi1jb3JlLyIsInNvdXJjZXMiOlsibGF5b3V0L2NvbXBvbmVudHMvc2lkZW5hdi1sYXlvdXQvc2lkZW5hdi1sYXlvdXQuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBaUJBLE9BQU8sRUFBRSxTQUFTLEVBQUUsWUFBWSxFQUFFLEtBQUssRUFBRSxNQUFNLEVBQXlCLFNBQVMsRUFBMEIsWUFBWSxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBQy9JLE9BQU8sRUFBRSxZQUFZLEVBQUUsTUFBTSxxQkFBcUIsQ0FBQztBQUNuRCxPQUFPLEVBQUUsNkJBQTZCLEVBQUUsTUFBTSxtREFBbUQsQ0FBQztBQUNsRyxPQUFPLEVBQUUsNEJBQTRCLEVBQUUsTUFBTSxrREFBa0QsQ0FBQztBQUNoRyxPQUFPLEVBQUUsZ0NBQWdDLEVBQUUsTUFBTSxzREFBc0QsQ0FBQztBQUN4RyxPQUFPLEVBQUUsZUFBZSxFQUFjLE1BQU0sTUFBTSxDQUFDO0FBRW5EO0lBZ0RJLGdDQUFvQixZQUEwQjtRQUE5QyxpQkFFQztRQUZtQixpQkFBWSxHQUFaLFlBQVksQ0FBYzs7OztRQXRDckMsYUFBUSxHQUFHLE9BQU8sQ0FBQzs7OztRQVluQixnQkFBVyxHQUFHLEtBQUssQ0FBQzs7OztRQUdwQixvQkFBZSxHQUFHLElBQUksQ0FBQzs7OztRQUd0QixhQUFRLEdBQUcsSUFBSSxZQUFZLEVBQVcsQ0FBQztRQWVqRCxvQkFBZSxHQUFHO1lBQ2QsVUFBVSxFQUFFLGNBQU8sQ0FBQztZQUNwQixlQUFlLEVBQUUsY0FBTSxPQUFBLEtBQUksQ0FBQyxlQUFlLEVBQXBCLENBQW9CO1NBQzlDLENBQUM7UUFHRSxJQUFJLENBQUMsa0JBQWtCLEdBQUcsSUFBSSxDQUFDLGtCQUFrQixDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztJQUNqRSxD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QUM5QixzM0NBQThDOztpQkFFakQ7Ozs7Z0JBVlEsWUFBWTs7OzJCQWdCaEIsS0FBSzs2QkFHTCxLQUFLOzZCQUdMLEtBQUs7MkJBR0wsS0FBSzs4QkFHTCxLQUFLO2tDQUdMLEtBQUs7MkJBR0wsTUFBTTtrQ0FFTixZQUFZLFNBQUMsNEJBQTRCO3NDQUN6QyxZQUFZLFNBQUMsZ0NBQWdDO21DQUM3QyxZQUFZLFNBQUMsNkJBQTZCOzRCQUsxQyxTQUFTLFNBQUMsV0FBVztnQ0FDckIsU0FBUyxTQUFDLGVBQWU7O0lBMkU5Qiw2QkFBQztDQUFBLEFBakhELElBaUhDO1NBNUdZLHNCQUFzQjs7O0lBRS9CLGlDQUF1Qjs7Ozs7SUFHdkIsMENBQTRCOzs7OztJQUc1Qiw0Q0FBNEI7Ozs7O0lBRzVCLDRDQUE0Qjs7Ozs7SUFHNUIsMENBQTBCOzs7OztJQUcxQiw2Q0FBNkI7Ozs7O0lBRzdCLGlEQUFnQzs7Ozs7SUFHaEMsMENBQWlEOztJQUVqRCxpREFBMEY7O0lBQzFGLHFEQUFzRzs7SUFDdEcsa0RBQTZGOzs7OztJQUU3RixzREFBdUQ7O0lBQ3ZELGdEQUEyQzs7SUFFM0MsMkNBQXVDOztJQUN2QywrQ0FBK0M7O0lBRS9DLGdEQUErQjs7SUFDL0Isa0RBQWlCOztJQUVqQixpREFHRTs7Ozs7SUFFVSw4Q0FBa0MiLCJzb3VyY2VzQ29udGVudCI6WyIvKiFcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxOSBBbGZyZXNjbyBTb2Z0d2FyZSwgTHRkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQgeyBDb21wb25lbnQsIENvbnRlbnRDaGlsZCwgSW5wdXQsIE91dHB1dCwgT25Jbml0LCBBZnRlclZpZXdJbml0LCBWaWV3Q2hpbGQsIE9uRGVzdHJveSwgVGVtcGxhdGVSZWYsIEV2ZW50RW1pdHRlciB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgTWVkaWFNYXRjaGVyIH0gZnJvbSAnQGFuZ3VsYXIvY2RrL2xheW91dCc7XG5pbXBvcnQgeyBTaWRlbmF2TGF5b3V0Q29udGVudERpcmVjdGl2ZSB9IGZyb20gJy4uLy4uL2RpcmVjdGl2ZXMvc2lkZW5hdi1sYXlvdXQtY29udGVudC5kaXJlY3RpdmUnO1xuaW1wb3J0IHsgU2lkZW5hdkxheW91dEhlYWRlckRpcmVjdGl2ZSB9IGZyb20gJy4uLy4uL2RpcmVjdGl2ZXMvc2lkZW5hdi1sYXlvdXQtaGVhZGVyLmRpcmVjdGl2ZSc7XG5pbXBvcnQgeyBTaWRlbmF2TGF5b3V0TmF2aWdhdGlvbkRpcmVjdGl2ZSB9IGZyb20gJy4uLy4uL2RpcmVjdGl2ZXMvc2lkZW5hdi1sYXlvdXQtbmF2aWdhdGlvbi5kaXJlY3RpdmUnO1xuaW1wb3J0IHsgQmVoYXZpb3JTdWJqZWN0LCBPYnNlcnZhYmxlIH0gZnJvbSAncnhqcyc7XG5cbkBDb21wb25lbnQoe1xuICAgIHNlbGVjdG9yOiAnYWRmLXNpZGVuYXYtbGF5b3V0JyxcbiAgICB0ZW1wbGF0ZVVybDogJy4vc2lkZW5hdi1sYXlvdXQuY29tcG9uZW50Lmh0bWwnLFxuICAgIHN0eWxlVXJsczogWycuL3NpZGVuYXYtbGF5b3V0LmNvbXBvbmVudC5zY3NzJ11cbn0pXG5leHBvcnQgY2xhc3MgU2lkZW5hdkxheW91dENvbXBvbmVudCBpbXBsZW1lbnRzIE9uSW5pdCwgQWZ0ZXJWaWV3SW5pdCwgT25EZXN0cm95IHtcblxuICAgIHN0YXRpYyBTVEVQX09WRVIgPSA2MDA7XG5cbiAgICAvKiogVGhlIHNpZGUgdGhhdCB0aGUgZHJhd2VyIGlzIGF0dGFjaGVkIHRvLiBQb3NzaWJsZSB2YWx1ZXMgYXJlICdzdGFydCcgYW5kICdlbmQnLiAqL1xuICAgIEBJbnB1dCgpIHBvc2l0aW9uID0gJ3N0YXJ0JztcblxuICAgIC8qKiBNaW5pbXVtIHNpemUgb2YgdGhlIG5hdmlnYXRpb24gcmVnaW9uLiAqL1xuICAgIEBJbnB1dCgpIHNpZGVuYXZNaW46IG51bWJlcjtcblxuICAgIC8qKiBNYXhpbXVtIHNpemUgb2YgdGhlIG5hdmlnYXRpb24gcmVnaW9uLiAqL1xuICAgIEBJbnB1dCgpIHNpZGVuYXZNYXg6IG51bWJlcjtcblxuICAgIC8qKiBTY3JlZW4gc2l6ZSBhdCB3aGljaCBkaXNwbGF5IHN3aXRjaGVzIGZyb20gc21hbGwgc2NyZWVuIHRvIGxhcmdlIHNjcmVlbiBjb25maWd1cmF0aW9uLiAqL1xuICAgIEBJbnB1dCgpIHN0ZXBPdmVyOiBudW1iZXI7XG5cbiAgICAvKiogVG9nZ2xlcyBzaG93aW5nL2hpZGluZyB0aGUgbmF2aWdhdGlvbiByZWdpb24uICovXG4gICAgQElucHV0KCkgaGlkZVNpZGVuYXYgPSBmYWxzZTtcblxuICAgIC8qKiBTaG91bGQgdGhlIG5hdmlnYXRpb24gcmVnaW9uIGJlIGV4cGFuZGVkIGluaXRpYWxseT8gKi9cbiAgICBASW5wdXQoKSBleHBhbmRlZFNpZGVuYXYgPSB0cnVlO1xuXG4gICAgLyoqIEVtaXR0ZWQgd2hlbiB0aGUgbWVudSB0b2dnbGUgYW5kIHRoZSBjb2xsYXBzZWQvZXhwYW5kZWQgc3RhdGUgb2YgdGhlIHNpZGVOYXYgY2hhbmdlcy4gKi9cbiAgICBAT3V0cHV0KCkgZXhwYW5kZWQgPSBuZXcgRXZlbnRFbWl0dGVyPGJvb2xlYW4+KCk7XG5cbiAgICBAQ29udGVudENoaWxkKFNpZGVuYXZMYXlvdXRIZWFkZXJEaXJlY3RpdmUpIGhlYWRlckRpcmVjdGl2ZTogU2lkZW5hdkxheW91dEhlYWRlckRpcmVjdGl2ZTtcbiAgICBAQ29udGVudENoaWxkKFNpZGVuYXZMYXlvdXROYXZpZ2F0aW9uRGlyZWN0aXZlKSBuYXZpZ2F0aW9uRGlyZWN0aXZlOiBTaWRlbmF2TGF5b3V0TmF2aWdhdGlvbkRpcmVjdGl2ZTtcbiAgICBAQ29udGVudENoaWxkKFNpZGVuYXZMYXlvdXRDb250ZW50RGlyZWN0aXZlKSBjb250ZW50RGlyZWN0aXZlOiBTaWRlbmF2TGF5b3V0Q29udGVudERpcmVjdGl2ZTtcblxuICAgIHByaXZhdGUgbWVudU9wZW5TdGF0ZVN1YmplY3Q6IEJlaGF2aW9yU3ViamVjdDxib29sZWFuPjtcbiAgICBwdWJsaWMgbWVudU9wZW5TdGF0ZSQ6IE9ic2VydmFibGU8Ym9vbGVhbj47XG5cbiAgICBAVmlld0NoaWxkKCdjb250YWluZXInKSBjb250YWluZXI6IGFueTtcbiAgICBAVmlld0NoaWxkKCdlbXB0eVRlbXBsYXRlJykgZW1wdHlUZW1wbGF0ZTogYW55O1xuXG4gICAgbWVkaWFRdWVyeUxpc3Q6IE1lZGlhUXVlcnlMaXN0O1xuICAgIF9pc01lbnVNaW5pbWl6ZWQ7XG5cbiAgICB0ZW1wbGF0ZUNvbnRleHQgPSB7XG4gICAgICAgIHRvZ2dsZU1lbnU6ICgpID0+IHt9LFxuICAgICAgICBpc01lbnVNaW5pbWl6ZWQ6ICgpID0+IHRoaXMuaXNNZW51TWluaW1pemVkXG4gICAgfTtcblxuICAgIGNvbnN0cnVjdG9yKHByaXZhdGUgbWVkaWFNYXRjaGVyOiBNZWRpYU1hdGNoZXIpIHtcbiAgICAgICAgdGhpcy5vbk1lZGlhUXVlcnlDaGFuZ2UgPSB0aGlzLm9uTWVkaWFRdWVyeUNoYW5nZS5iaW5kKHRoaXMpO1xuICAgIH1cblxuICAgIG5nT25Jbml0KCkge1xuICAgICAgICBjb25zdCBpbml0aWFsTWVudVN0YXRlID0gIXRoaXMuZXhwYW5kZWRTaWRlbmF2O1xuXG4gICAgICAgIHRoaXMubWVudU9wZW5TdGF0ZVN1YmplY3QgPSBuZXcgQmVoYXZpb3JTdWJqZWN0PGJvb2xlYW4+KGluaXRpYWxNZW51U3RhdGUpO1xuICAgICAgICB0aGlzLm1lbnVPcGVuU3RhdGUkID0gdGhpcy5tZW51T3BlblN0YXRlU3ViamVjdC5hc09ic2VydmFibGUoKTtcblxuICAgICAgICBjb25zdCBzdGVwT3ZlciA9IHRoaXMuc3RlcE92ZXIgfHwgU2lkZW5hdkxheW91dENvbXBvbmVudC5TVEVQX09WRVI7XG4gICAgICAgIHRoaXMuaXNNZW51TWluaW1pemVkID0gaW5pdGlhbE1lbnVTdGF0ZTtcblxuICAgICAgICB0aGlzLm1lZGlhUXVlcnlMaXN0ID0gdGhpcy5tZWRpYU1hdGNoZXIubWF0Y2hNZWRpYShgKG1heC13aWR0aDogJHtzdGVwT3Zlcn1weClgKTtcbiAgICAgICAgdGhpcy5tZWRpYVF1ZXJ5TGlzdC5hZGRMaXN0ZW5lcih0aGlzLm9uTWVkaWFRdWVyeUNoYW5nZSk7XG4gICAgfVxuXG4gICAgbmdBZnRlclZpZXdJbml0KCkge1xuICAgICAgICB0aGlzLnRlbXBsYXRlQ29udGV4dC50b2dnbGVNZW51ID0gdGhpcy50b2dnbGVNZW51LmJpbmQodGhpcyk7XG4gICAgfVxuXG4gICAgbmdPbkRlc3Ryb3koKTogdm9pZCB7XG4gICAgICAgIHRoaXMubWVkaWFRdWVyeUxpc3QucmVtb3ZlTGlzdGVuZXIodGhpcy5vbk1lZGlhUXVlcnlDaGFuZ2UpO1xuICAgIH1cblxuICAgIHRvZ2dsZU1lbnUoKSB7XG4gICAgICAgIGlmICghdGhpcy5tZWRpYVF1ZXJ5TGlzdC5tYXRjaGVzKSB7XG4gICAgICAgICAgICB0aGlzLmlzTWVudU1pbmltaXplZCA9ICF0aGlzLmlzTWVudU1pbmltaXplZDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuaXNNZW51TWluaW1pemVkID0gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmNvbnRhaW5lci50b2dnbGVNZW51KCk7XG4gICAgICAgIHRoaXMuZXhwYW5kZWQuZW1pdCghdGhpcy5pc01lbnVNaW5pbWl6ZWQpO1xuICAgIH1cblxuICAgIGdldCBpc01lbnVNaW5pbWl6ZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9pc01lbnVNaW5pbWl6ZWQ7XG4gICAgfVxuXG4gICAgc2V0IGlzTWVudU1pbmltaXplZChtZW51U3RhdGU6IGJvb2xlYW4pIHtcbiAgICAgICAgdGhpcy5faXNNZW51TWluaW1pemVkID0gbWVudVN0YXRlO1xuICAgICAgICB0aGlzLm1lbnVPcGVuU3RhdGVTdWJqZWN0Lm5leHQoIW1lbnVTdGF0ZSk7XG4gICAgfVxuXG4gICAgZ2V0IGlzSGVhZGVySW5zaWRlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5tZWRpYVF1ZXJ5TGlzdC5tYXRjaGVzO1xuICAgIH1cblxuICAgIGdldCBoZWFkZXJUZW1wbGF0ZSgpOiBUZW1wbGF0ZVJlZjxhbnk+IHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaGVhZGVyRGlyZWN0aXZlICYmIHRoaXMuaGVhZGVyRGlyZWN0aXZlLnRlbXBsYXRlIHx8IHRoaXMuZW1wdHlUZW1wbGF0ZTtcbiAgICB9XG5cbiAgICBnZXQgbmF2aWdhdGlvblRlbXBsYXRlKCk6IFRlbXBsYXRlUmVmPGFueT4ge1xuICAgICAgICByZXR1cm4gdGhpcy5uYXZpZ2F0aW9uRGlyZWN0aXZlICYmIHRoaXMubmF2aWdhdGlvbkRpcmVjdGl2ZS50ZW1wbGF0ZSB8fCB0aGlzLmVtcHR5VGVtcGxhdGU7XG4gICAgfVxuXG4gICAgZ2V0IGNvbnRlbnRUZW1wbGF0ZSgpOiBUZW1wbGF0ZVJlZjxhbnk+IHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29udGVudERpcmVjdGl2ZSAmJiB0aGlzLmNvbnRlbnREaXJlY3RpdmUudGVtcGxhdGUgfHwgdGhpcy5lbXB0eVRlbXBsYXRlO1xuICAgIH1cblxuICAgIG9uTWVkaWFRdWVyeUNoYW5nZSgpIHtcbiAgICAgICAgdGhpcy5pc01lbnVNaW5pbWl6ZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5leHBhbmRlZC5lbWl0KCF0aGlzLmlzTWVudU1pbmltaXplZCk7XG4gICAgfVxufVxuIl19